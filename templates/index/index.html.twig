{% extends 'base.html.twig' %}

{% block title %}Hello IndexController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">

{% if app.user %}
    <h1>Hello {{ app.user.username }} âœ…</h1>
{% else %}
    <h1>Bienvenue</h1>
{% endif %}

</div>
{% endblock %}
{% block javascripts %}

<script>

var request = new XMLHttpRequest()

request.open('GET', 'https://ghibliapi.herokuapp.com/films/', true);

request.onload = function() {
  // Begin accessing JSON data here test
  var data = JSON.parse(this.response)

  if (request.status >= 200 && request.status < 400) {
    data.forEach(movie => {
      console.log(movie.title)
    })
  } else {
    console.log('error')
  }
}

request.send();

</script>

{% endblock %}
